"use strict";!function(e){function t(e){u.classList.add("visible"),s.myAnswer=e.target.getAttribute("data-answer")}function n(){y.classList.remove("visible"),L.classList.remove("visible"),o.classList.remove("hidden"),s.currentQuestion=-1,s.myAnswer="",r.textContent="---",i.textContent="---",c.forEach(function(e){return e.textContent="---"})}var s={jsonData:[],currentQuestion:-1,myAnswer:"",prizeTable:[1,2,3,5,10,15,25,50,75,100,150,250,500,750,1e3]},r=e.querySelector(".js-challengePrize"),i=e.querySelector(".js-questionText"),c=e.querySelectorAll(".js-choicesItem"),o=e.querySelector(".js-startModal"),a=e.querySelector(".js-startButton"),u=e.querySelector(".js-confirmModal"),l=e.querySelector(".js-finalAnswer"),d=e.querySelector(".js-rethink"),f=e.querySelector(".js-successModal"),v=e.querySelector(".js-nextQuestion"),j=e.querySelector(".js-dropout"),L=e.querySelector(".js-resultModal"),b=e.querySelector(".js-prize"),y=e.querySelector(".js-failedModal"),h=e.querySelectorAll(".js-returnTop"),m=function(){s.currentQuestion=s.currentQuestion+1,0<f.className.indexOf("visible")&&f.classList.remove("visible"),i.textContent="Q".concat(s.currentQuestion+1," : ").concat(s.jsonData[s.currentQuestion].question);function n(e){return Object.keys(s.jsonData[s.currentQuestion].choices)[e]}Object.values(s.jsonData[s.currentQuestion].choices).forEach(function(e,t){c[t].textContent="".concat(n(t)," : ").concat(e),c[t].setAttribute("data-answer",n(t))}),r.textContent="￥".concat((1e4*s.prizeTable[s.currentQuestion]).toLocaleString())},q=function(){L.classList.add("visible"),u.classList.remove("visible"),f.classList.remove("visible"),b.textContent="￥".concat((1e4*s.prizeTable[s.currentQuestion]).toLocaleString())};a.addEventListener("click",function(){o.classList.add("hidden"),s.jsonData.length?m():fetch("https://api-charades-fzx9fn3j387f.netlify.app/.netlify/functions/quiz-millionaire").then(function(e){return e.json()}).then(function(e){return s.jsonData=e}).then(function(){return m()}).catch(function(){return console.error("データ取得に失敗しました。")})}),c.forEach(function(e){return e.addEventListener("click",t)}),l.addEventListener("click",function(){var e=s.jsonData[s.currentQuestion].answer===s.myAnswer,t=s.currentQuestion===s.jsonData.length-1;e&&t?q():(e?f.classList.add("visible"):y.classList.add("visible"),u.classList.remove("visible"))}),d.addEventListener("click",function(){u.classList.remove("visible")}),v.addEventListener("click",m),h.forEach(function(e){return e.addEventListener("click",n)}),j.addEventListener("click",function(){f.classList.remove("visible"),L.classList.add("visible"),b.textContent="￥".concat((1e4*s.prizeTable[s.currentQuestion]).toLocaleString())})}(document);